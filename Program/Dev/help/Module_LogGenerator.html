<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<HEAD>
<style>
body {background-color: transparent;}
th, td {vertical-align: top;}
a    {color: blue;}
p.ex {color: red;}
h2,h3,h4,h5 {margin-top: 2em; }
</style>
<TITLE>Help XMapTools</TITLE>
</HEAD>

<BODY>
<h1> Help > Module > Log Generator </h1>    	
<p><i>Help file version 13.01.2024 by J. Liu & P. Lanari</i></p>

<br \>
<hr>
<p><b>Table of content</b><br \><br \>
<a href="#DataFormat">Data format</a><br \>
<a href="#LogGenerator">Log Generator Module</a><br \>

</p>
<hr>
<br \> 

<p>The Log Generator module allows data collected as multiple files to be processed without a laser log file. </p>


<h2><a name="DataFormat"></a>1. Data format</h2>

<p>Each line scan for the reference material and the unknown should be consistent and contain first a background measurement, then the material measurement and a whashout time.  </p>

<p>Name (or rename) the files as:</p>
<ul>
<li>X – SampleName</li>
<li>X – GSD-1G</li>
<li>X – Nist612</li>
</ul>
<p>Where X is the serial number of each analysis. Note that using the standard reference material name from XMapTools will allow automatic identification of the standard. </p>

<p>Other formats are also compatible and files are automatically sorted by date and time in the module.</p>


<h2><a name="LogGenerator"></a>2. Log Generate Module</h2>

<h3>2.1 Settings & File Names</h3>

<p>In the "Map Settings" tab, enter the values for laser diameter and scan speed (Fig. 1). The starting position can be kept to <i>X</i>=1 and <i>Y</i>=1.</p>

<p>Then go to the File Names tab. Here we need to clean up the file names so that all measurements of the same standard or unknown have the same name. If you are using the name format defined above, change the Name position to 2. Note that an example is shown using the first file name. Click on the Apply to all button and this will change the file name of all raw data in the list to just Sample Name and Standard Name without the serial number.</p>

<br \>
<center>
<img src="./img/Log_Generator_Step1a.png" width="300"> <img src="./img/Log_Generator_Step1b.png" width="300">

<p><i><b>Figure 1</b>: .</i> Log Generator module with measurement settings (left) and tools for editing file names (right).  </p>
</center>

<h3>2.1 Set laser on/off timestamps</h3>

<p>Go to the table with the list of standard and sample data, click on a row to display the total signal and set the time for the background measurement and the sample/standard measurement. The tools for this task are on the Signal Definition tab.</p>

<p>Using the first measurement (primary reference material) as an example, select the first file by clicking on its name in the table and go to the Signal Definition tab. On the Signal Definition tab, click the Add ROI button and drag and drop a rectangular region of interest for the background. You can adjust the shape or manually edit the Sweep ID in the Sweep_start and Sweep_end input cells. Ideally you will want to start with a value of 1 and end with the last sweep that measured the background (just before the laser is switched on). Note that changing the number in the input cells does not change the ROI. Only the number in the input cells is used in the following (you can press Reset ROI to clear the display). When you're ready, select the 'Background' type from the drop-down menu and click the 'Add to table' button to add this definition to the table (Fig. 2). </p>

<p>The Sweep_start and Sweep_end values can be changed directly in the definition table.</p>

<p> For the 'measurement', set Sweep_start to Sweep_End of the background + 1 and Sweep_End to the number of sweeps in this file (258 in Figure 3). Edit the value and press the 'Add to table' button.
</p>

<p>When you're happy with the definition, go to the Apply tab and click the 'Apply to Same Name' button to automatically apply the definition to all files of the same type. 
Repeat the same process for all standards, unknowns and samples.</p>


<br \>
<center>
<img src="./img/Log_Generator_Step2.png" width="600">

<p><i><b>Figure 2</b>: .</i> Selection of background for the first file. Note that the Sweep_start and Sweep_end values have been edited after the ROI has been drawn.</p>
</center>

<br \>
<center>
<img src="./img/Log_Generator_Step3.png" width="600">

<p><i><b>Figure 3</b>: .</i> Selection of measurement for the first file.</p>
</center>



<h3>2.2 Validate</h3>

<p>When laser on/off timestamps have been defined for all files, press the Generate Log button <img src="./img/Log_Generator_Button.png" width="120"> to continue. This will close the module.</p>

<p>There should be no need for time shift correction in the converter module if the log data has been generated by the log generator module. </p> 

<br \> <br \> <br \>
<br \> <br \> <br \>
<br \> <br \> <br \>
</BODY>
</HTML>














